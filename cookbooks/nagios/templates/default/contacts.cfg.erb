# Contact definitions
#
# Autogenerated by Chef.

define contact {
  contact_name                    root
  alias                           Root
  service_notification_period     24x7
  host_notification_period        24x7
  service_notification_options    w,u,c,r
  host_notification_options       d,r
  service_notification_commands   service-notify-by-email
  host_notification_commands      host-notify-by-email
  email                           root@localhost
}

define contactgroup {
  contactgroup_name admins
  alias             Nagios Administrators
  members           <%= @members.join(',') %><%= ",pagerduty" unless node['nagios']['pagerduty_key'].empty? %>
}

define contactgroup {
  contactgroup_name admins-sms
  alias             Sysadmin SMS
  members           <%= @members.join(',') %>
}

define contactgroup {
  contactgroup_name admins-email
  alias             Nagios Administrators Email Only
  members           <%= @members.join(',') %>
}

<% @contact_groups.each do |cg| -%>
define contactgroup {
  contactgroup_name <%= cg['id'] %>
  <%= "alias " + cg['id'] + "-email" %>
  <%= "members " + cg['members'].join(',') unless cg['members'].nil? %>
}
<% end -%>

# Contacts below are generated from a list of sysadmins and adding contacts for each contactgroup as needed
<% @allcontacts.each do |c| -%>
define contact {
  use          default-contact
  contact_name <%= c['id'] %>
  <%= "email  #{c['email']}" unless c['email'].nil? %>
}

<% end -%>
